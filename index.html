<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIRRORLOOP Demo Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e5e7eb;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .line-mockup {
            width: 100%;
            max-width: 400px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            border-radius: 2rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
            overflow: hidden;
            background-color: #fff;
        }
        .header {
            background-color: #06c755;
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            position: relative;
        }
        .chat-area {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background-color: #f7f9fa;
        }
        .message {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        .bot {
            background-color: #e6e6e6;
            align-self: flex-start;
        }
        .user {
            background-color: #a4e5a4;
            align-self: flex-end;
            margin-left: auto;
        }
        .input-area {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 1rem;
            background-color: #fff;
            border-top: 1px solid #e6e6e6;
        }
        .hidden {
            display: none;
        }
        .subtitle-area {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 1rem;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.6);
            z-index: 10;
            box-sizing: border-box;
            white-space: pre-wrap;
        }
        .api-note {
            font-size: 0.75rem;
            color: #666;
            margin-top: -0.5rem;
            margin-bottom: 0.5rem;
            align-self: flex-start;
            text-align: left;
            padding: 0.75rem 1rem;
            max-width: 80%;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body class="bg-gray-200">
    <div class="line-mockup">
        <div class="header">
            MIRRORLOOP
        </div>
        <div class="chat-area" id="chat-area">
            <!-- Messages will be inserted here -->
        </div>
        <div class="input-area hidden" id="input-area">
            <!-- Buttons are removed -->
        </div>
        <div class="subtitle-area" id="subtitle-area">
            <!-- Subtitles will be displayed here -->
        </div>
    </div>

    <script>
        const chatArea = document.getElementById('chat-area');
        const subtitleArea = document.getElementById('subtitle-area');

        // Demo script with Japanese and English subtitles
        const script = [
            { sender: 'bot', text: '🪞 MIRRORLOOPへようこそ。\n\n仏教の唯識をベースにした、あなたの心を映し返すAIです。自分の心と向き合う「観照セッション」ができます。\n\nこのAIは開発中でみなさんのお声を聞きながら育てていきたいと思っています。現在β版のため無料ですが、段階的に有料化する予定です。\n\n自分の心に向き合いたいなら、「観照セッション」をはじめてみてください。途中でやめられます。', subtitle: 'Welcome to MIRRORLOOP. An AI based on Buddhist philosophy to reflect your mind.' },
            { sender: 'user', text: '観照セッション', subtitle: 'Observation Session' },
            { sender: 'bot', text: '🧘‍♀️ 観照セッションについて\n\nこれから9つの問いを通じて、あなたの心の状態をAIが仏教の唯識思想に基づき気づきのコメントを返します。（所要時間：約10-15分）\n\n心の準備はいかがですか？', subtitle: 'Through 9 questions, the AI provides insights based on the Buddhist concept of Yogacara.' },
            { sender: 'user', text: 'はい、始めます', subtitle: 'Yes, let\'s start.' },
            { sender: 'bot', text: '🌟 観照セッション開始\n\nそれでは始めましょう。これから9つの問いを投げかけます。\n\n今日は、どんな出来事がありましたか？できるだけ詳しく教えてください。', subtitle: 'Let\'s begin. Please tell me about a recent event that\'s on your mind.' },
            { sender: 'user', text: 'プロジェクトの締切が迫っているのに、なかなか集中できずに焦りを感じていました', subtitle: 'The project deadline is approaching, and I feel anxious because I can\'t concentrate.' },
            { sender: 'bot', text: 'そのとき、あなたはどんな感情がわきましたか？怒り、不安、喜び、悲しみなど、率直にどうぞ。', subtitle: 'What emotions did you feel at that moment? Please be honest about your anger, anxiety, joy, etc.' },
            { sender: 'user', text: '不安と焦り、そして自分への苛立ちがありました', subtitle: 'I felt anxiety, impatience, and irritation towards myself.' },
            { sender: 'bot', text: 'そのとき、体にはどんな感覚がありましたか？胸のざわつき、肩のこわばり、震えなど、身体の反応に目を向けてみましょう。', subtitle: 'What physical sensations did you experience? Focus on your body\'s reactions.' },
            { sender: 'user', text: '胸がざわざわして、肩に力が入っていました', subtitle: 'My chest was fluttering, and my shoulders felt tense.' },
            { sender: 'bot', text: '頭の中では、どんな思考が浮かんでいましたか？ぐるぐる回っていた言葉やイメージがあれば、それも含めて教えてください。', subtitle: 'What thoughts were going through your mind? Tell me about any words or images that were repeating.' },
            { sender: 'user', text: '時間がない、やばい、どうしよう、という言葉が頭の中をぐるぐる回っていました', subtitle: 'Words like "no time," "this is bad," and "what should I do" were swirling in my head.' },
            { sender: 'bot', text: 'その出来事について、相手や状況に対してどんな評価や判断をしていましたか？', subtitle: 'What judgments or evaluations did you have about the situation or others involved?' },
            { sender: 'user', text: 'スケジュール管理ができていない、準備不足だと思いました', subtitle: 'I thought I had poor time management and was unprepared.' },
            { sender: 'bot', text: 'また、自分自身に対してはどんな評価や思いがありましたか？責めたり、情けなく感じたり、あるいは正当化しようとしたかもしれません。', subtitle: 'What thoughts or evaluations did you have about yourself? Did you blame yourself or feel pathetic?' },
            { sender: 'user', text: 'だらしない、計画性がないと自分を責めました', subtitle: 'I blamed myself, thinking I was sloppy and lacked a plan.' },
            { sender: 'bot', text: 'そうした評価の背後には、どんな思い込みや前提があったように思いますか？「〜べき」「〜でなければならない」など、気づいているものがあれば。', subtitle: 'What assumptions or beliefs were behind those judgments? If you\'re aware of any "shoulds" or "musts," please share.' },
            { sender: 'user', text: '完璧にやらなければならない、失敗してはいけない、という思い込みがありました', subtitle: 'I had the belief that I must be perfect and must not fail.' },
            { sender: 'bot', text: '本当は、あなたはどうしたかったのでしょうか？その場で、どんなことを願っていたのか、心の奥を見つめてみてください。', subtitle: 'What did you truly want to do? Look deep into your heart for your genuine wish in that moment.' },
            { sender: 'user', text: '落ち着いて、一つずつ丁寧に取り組めたかった', subtitle: 'I wanted to calm down and work on each task carefully.' },
            { sender: 'bot', text: '今この瞬間、どんな願いや方向性が心にありますか？すぐにできる小さな一歩でも構いません。', subtitle: 'What desires or directions are in your heart right now? Even a small, immediate step is fine.' },
            { sender: 'user', text: 'まず深呼吸をして、優先順位をつけて進めていこうと思います', subtitle: 'I think I\'ll start by taking a deep breath and prioritizing my tasks.' },
            { sender: 'bot', text: '観照が完了しました。あなたの回答から、観照コメントと分析結果をまとめました。\n\n【観照コメント】\n心の焦りや不安が揺れ動いています。自分を責めず、静かな呼吸を取り戻せますか？\n\n検出された心の状態：掉挙、悩、悔、慢\n分類：随煩悩、随煩悩、不定心所、根本煩悩', subtitle: 'Observation complete. Here is the observation and analysis based on your answers. Your anxiety is fluctuating. Can you take a moment and just breathe without judging yourself?' },
            { sender: 'bot', text: 'データが正常に保存されました。\n\nありがとうございました。また心を見つめたいときにお声がけください。', subtitle: 'The data has been saved successfully.\n\nThank you. Please reach out again whenever you want to reflect on your mind.'}
        ];

        let currentStep = 0;

        function createMessageElement(messageData) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message fade-in ${messageData.sender}`;
            messageDiv.innerText = messageData.text;
            return messageDiv;
        }

        function showNextMessage() {
            if (currentStep < script.length) {
                const messageData = script[currentStep];
                const messageElement = createMessageElement(messageData);
                chatArea.appendChild(messageElement);
                chatArea.scrollTop = chatArea.scrollHeight;

                // Update subtitle
                subtitleArea.innerText = messageData.subtitle;

                currentStep++;
            }
        }

        // Initialize chat with the first message
        window.onload = () => {
            showNextMessage();
            setInterval(() => {
                showNextMessage();
            }, 3000); // Wait 3 seconds to show next message
        };
    </script>
</body>
</html>
